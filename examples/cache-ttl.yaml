name: Cache TTL test - 60 second max-age

scenario:
  # Step 1: Initial request at t=0s - cache miss
  - at: "0s"
    request:
      url: /article
    backend:
      status: 200
      headers:
        Cache-Control: "max-age=60"
        Content-Type: "text/html"
      body: "Article content"
    expectations:
      response:
        status: 200
      cache:
        hit: false

  # Step 2: Request at t=30s - cache hit, fresh
  - at: "30s"
    request:
      url: /article
    expectations:
      response:
        status: 200
      cache:
        hit: true
        age_lt: 35

  # Step 3: Request at t=70s - cache expired, new backend fetch
  - at: "70s"
    request:
      url: /article
    expectations:
      response:
        status: 200
      cache:
        hit: false
